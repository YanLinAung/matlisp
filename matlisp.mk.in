# Copyright (c) 2000 The Regents of the University of California.
# All rights reserved. 
#
# Permission is hereby granted, without written agreement and without
# license or royalty fees, to use, copy, modify, and distribute this
# software and its documentation for any purpose, provided that the
# above copyright notice and the following two paragraphs appear in all
# copies of this software.
#
# IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY
# FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
# ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
# THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.
#
# THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES,
# INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
# PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF
# CALIFORNIA HAS NO OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES,
# ENHANCEMENTS, OR MODIFICATIONS.
#
##########################################################################
#
# Process this file with 'make' or 'gmake'.
#
##########################################################################
#
# $Id: matlisp.mk.in,v 1.1 2000/07/11 02:03:13 simsek Exp $
#
# $Log: matlisp.mk.in,v $
# Revision 1.1  2000/07/11 02:03:13  simsek
# o Initial revision
# o Derived from obsolete Makefile.in
#
#
##########################################################################
prefix=@prefix@
FC = @F77@
F77 = @F77@
FFLAGS = @FFLAGS@
FLIBS =  @FLIBS@
CC = @CC@
CLIBS = @CLIBS@
LIBS = @LIBS@
LD = @LD@
LDFLAGS = @LDFLAGS@
AR = ar
ARFLAGS = rv

BLAS_OBJS =  dgemm.o dswap.o dtrmv.o lsame.o zdotu.o zhemv.o ztrmv.o \
	dgemv.o  dsymv.o  dtrsm.o  zher2.o   ztrsm.o \
	dasum.o  dger.o   dsyr.o   dtrsv.o   zdscal.o zher2k.o ztrsv.o \
	daxpy.o  dsyr2.o  dzasum.o xerbla.o  zgemm.o  zherk.o \
	dcabs1.o dnrm2.o  dsyr2k.o dznrm2.o  zaxpy.o  zgemv.o  zscal.o \
	dcopy.o  drot.o   dsyrk.o  idamax.o  zcopy.o  zgerc.o  zswap.o \
	ddot.o	 dscal.o  dtrmm.o  izamax.o  zdotc.o  zgeru.o  ztrmm.o dsymm.o

LAPACK_OBJS =  dlasq5.o dlasq6.o ieeeck.o zdrot.o dlabad.o \
	dlarf.o   dorglq.o  zhetd2.o  zlatrs.o \
	dbdsqr.o  dlabrd.o  dlarfb.o  dorgql.o	 zhetrd.o  zpotf2.o \
	dgebak.o  dlacon.o  dlarfg.o  dorgqr.o	 zhseqr.o  zpotrf.o \
	dgebal.o  dlacpy.o  dlarft.o  dorgtr.o	 zbdsqr.o  zlabrd.o  zrot.o \
	dgebd2.o  dladiv.o  dlarfx.o  dorm2r.o	 zdrscl.o  zlacgv.o  zsteqr.o \
	dgebrd.o  dlae2.o   dlartg.o  dormbr.o	 zgebak.o  zlacon.o  ztrevc.o \
	dgeesx.o  dlaev2.o  dlas2.o   dorml2.o	 zgebal.o  zlacpy.o  ztrexc.o \
	dgeev.o	  dlaexc.o  dlascl.o  dormlq.o	 zgebd2.o  zladiv.o  ztrsen.o \
	dgehd2.o  dlag2.o   dlaset.o  dormqr.o	 zgebrd.o  zlahqr.o  ztrsyl.o \
	dgehrd.o  dlahqr.o  dlasq1.o  drscl.o	 zgeesx.o  zlahrd.o  zung2l.o \
	dgelq2.o  dlahrd.o  dlasq2.o  dsteqr.o	 zgeev.o   zlange.o  zung2r.o \
	dgelqf.o  dlaln2.o  dlasq3.o  dsterf.o	 zgehd2.o  zlanhe.o  zungbr.o \
	dgelss.o  dlasq4.o  dsyev.o   zgehrd.o   zlanhs.o  zunghr.o \
	dgeqpf.o  dlasr.o   dsytd2.o  zgelq2.o   zlarf.o   zungl2.o \
	dgeqr2.o  dlasrt.o  dsytrd.o  zgelqf.o   zlarfb.o  zunglq.o \
	dgeqrf.o  dlassq.o  dtrevc.o  zgelss.o   zlarfg.o  zungql.o \
	dgesv.o	  dlasv2.o  dtrexc.o  zgeqpf.o   zlarft.o  zungqr.o \
	dgesvd.o  dlamch.o  dlaswp.o  dtrsen.o	 zgeqr2.o  zlarfx.o  zungtr.o \
	dgetf2.o  dlange.o  dlasy2.o  dtrsyl.o	 zgeqrf.o  zlartg.o  zunm2r.o \
	dgetrf.o  dlanhs.o  dlatrd.o  dzsum1.o	 zgesv.o   zlascl.o  zunmbr.o \
	dgetrs.o  dlanst.o  dorg2l.o  ilaenv.o	 zgesvd.o  zlaset.o  zunml2.o \
	dggbal.o  dlansy.o  dorg2r.o  izmax1.o	 zgetf2.o  zlasr.o   zunmlq.o \
	dgghrd.o  dlanv2.o  dorgbr.o  zgetrf.o   zlassq.o  zunmqr.o \
	dhgeqz.o  dlapy2.o  dorghr.o  zgetrs.o   zlaswp.o \
	dhseqr.o  dlapy3.o  dorgl2.o  zheev.o    zlatrd.o 

DFFTPACK_OBJS = zfftb.o \
	cfftb1.o \
	zfftf.o \
	cfftf1.o \
	zffti.o \
	cffti1.o \
	dcosqb.o \
	cosqb1.o \
	dcosqf.o \
	cosqf1.o \
	dcosqi.o \
	dcost.o \
	dcosti.o \
	ezfft1.o \
	dzfftb.o \
	dzfftf.o \
	dzffti.o \
	passb.o \
	passb2.o \
	passb3.o \
	passb4.o \
	passb5.o \
	passf.o \
	passf2.o \
	passf3.o \
	passf4.o \
	passf5.o \
	radb2.o \
	radb3.o \
	radb4.o \
	radb5.o \
	radbg.o \
	radf2.o \
	radf3.o \
	radf4.o \
	radf5.o \
	radfg.o \
	dfftb.o \
	rfftb1.o \
	dfftf.o \
	rfftf1.o \
	dffti.o \
	rffti1.o \
	dsinqb.o \
	dsinqf.o \
	dsinqi.o \
	dsint.o \
	sint1.o \
	dsinti.o

OBJS = $(BLAS_OBJS:%=$(prefix)/LAPACK/BLAS/SRC/%) \
	$(LAPACK_OBJS:%=$(prefix)/LAPACK/SRC/%) \
	$(DFFTPACK_OBJS:%=$(prefix)/dfftpack/%)

LIB = $(prefix)/lib/libmatlisp
LAZY_LOADER=$(prefix)/lib/lazy-loader.o

.f.o:
	$(F77) $(FFLAGS) -o $@ -c $<

.c.o:
	$(CC) $(CFLAGS) -o $@ -c $<

shared: $(OBJS)
	@echo $(LD) $(LDFLAGS) -o $(LIB)shared.so ... many object files ...
	@$(LD) $(LDFLAGS) -o $(LIB)shared.so $(OBJS) $(FLIBS)

static: $(LAZY_LOADER) $(OBJS)
	@echo $(AR) $(ARFLAGS) ... many object files ... $(LIB)static.a
	@$(AR) $(ARFLAGS) $(LIB)static.a $(OBJS)
	

clean:
	@echo \rm -f ... many object files ...
	@\rm -f $(OBJS)

distclean:
	\rm -f $(LIB)shared.so
	\rm -f $(LIB)static.a
	\rm -f $(LAZY_LOADER)

